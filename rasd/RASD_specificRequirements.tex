\section{Specific Requirements}

\subsection{Requirements}
The following requirements are derived in order to fulfill the specified goals.
\subsubsection{Goals}
	\begin{description}
		\item \ref{goal:register}\ Allow users to register to the system
			\begin{enumerate}[label=\textbf{R\arabic*}]
  				\item The system must require to the user an username to identify him
   				\item The system must check the username inserted by the user doesn't belong to
   				another user already registered to the system 
   				\item At the end of the registration phase the system must provide the user a password
   				bound to the username inserted by the user that can be used to access the system
   				\item The system must require to the user driving license ID code and expiring date in the
   				registration phase
   				\item The system must require to the user payments informations in the registration phase
   				\item The system must require to the user an email address in the registration phase
   				\item The system must require to the user to insert his name, surname, birth date and
   				place and current domicile in the registration phase
   				\item The system offers an interface to allow the user to modify or update his
   				anagraphical informations, payment informations, driving license informations and
   				password (username can't be changed)
  			\end{enumerate}
		\item \ref{goal:login}\ Allow registered users to authenticate to the system
			\begin{enumerate}[resume*]
  				\item The system must require to the user his username and password to authenticate to
  				the system
   				\item The system must be able to check if username and password (paired together)
   				correspond to a user correctly registered to the service
   				\item The system must allow access to the services provided by the system only to
   				authenticated users 
			\end{enumerate}
		\item \ref{goal:position}\ Provide authenticated users with the position of available cars
			\begin{enumerate}[resume*]
				\item The system must be able to identify each car uniquely
			 	\item At each time the system must pair a car with one and only one state
  				\item The system must be able to retrieve the exact position of each car
   				\item The system must be able to know the current state of each car
   				\item The system must be able to know the exact amount of time the car has been on
   				current state
   				\item The system must be able to show a map with the position of \emph{Available} cars
  				\item The system must be able to identify the position of the user and show it on a map
   				\item The system must be able to calculate the distance of each car from a given position
  			\end{enumerate}
		\item \ref{goal:notifyMaintenance}\ Notify maintenance office with a list of not available cars
			\begin{enumerate}[resume*]
   				\item The system must be able to retrieve the current battery level of each car
   				\item The system must be able to set a specific car state as \emph{Not Available} in order
   				to prevent users to rent the aforementioned car
   				\item The system must offer an API to retrieve the list of cars marked as \emph{Not
   				Available}
  			\end{enumerate}
		\item \ref{goal:maintenance}\ Provide the maintenance office with a way to notify the system
		when a car must be inserted or removed from the list on unavailable cars
			\begin{enumerate}[resume*]
   				\item The system must be able to set a specific car state as \emph{Available} in order to
   				allow users to rent the aforementioned car
   				\item The system must offer an access restricted API that allows to set the state of a
   				specific car as \emph{Available} or \emph{Not Available}
  			\end{enumerate}
  		\item \ref{goal:banUnbanUsers}\ Provide customer service with a way to ban users in order
  		prevent them from reserving or using other cars, and enable them to use the service again
  			\begin{enumerate}[resume*]
  				\item The system must be able to mark an user as \emph{banned}
  				\item The system must not allow a \emph{banned} user to access the system
   				\item The system must only provide informations about how to contact customer service
   				to a \emph{banned} user who tries to authenticate to the system
   				\item The system must offer an access restricted API that allows to set the state of a
   				specific user as \emph{banned} or \emph{not banned}
   			\end{enumerate}
 	  	\item \ref{goal:carReservation}\ Allow a user to reserve a car, if available, and hold this
 	  	reservation for an hour
 	  		\begin{enumerate}[resume*]
 	  			\item The system must allow a user to select a specific car in order to reserve it 
 	  			(i.f.f its current state is \emph{Available}), setting as \emph{Reserved} the state of the
 	  			aformentioned car
 	  			\item The state \emph{Reserved} of a specific car must be uniquely paired with the user
 	  			who made the reservation
 	  			\item A car set as \emph{Reserved} remains in this state exactly one hour after the
 	  			reservation is made by the user; after that time the reservation expires and the system
 	  			must set the state of the aforementioned car as \emph{Available}
   			\end{enumerate}
  		\item \ref{goal:reservationFee}\ Charge the user for 1\euro\ in case the car he reserved hasn't
  		been used after an hour from the reservation
  			\begin{enumerate}[resume*]
  				\item The system must be able to carry out a payment procedure based on payment
  				informations provided by the user and on a specific amount of money the system needs to
  				charge the user of
  				\item The system must be able to know if a payment procedure returns a failure or is
  				correctly accomplished
  				\item The system must be able to ban the user (set as \emph{banned} user) if a payment
  				procedure couldn't be completed correctly
  				\item The system must charge the user for 1\euro\ (through a payment procedure) if the
  				car he reserved has been set as \emph{Reserved} paired with the aforementioned user for
  				one hour
   			\end{enumerate}
  		\item \ref{goal:completeRent}\ Allow a user to perform a complete rent, reserving a car, using
  		it and leaving it terminating the rent in a safe area with the payment procedure related to
  		aforementioned rent
  			\begin{enumerate}[resume*]
  			    \item The state \emph{In Use} of a specific car must be uniquely paired with the user who
  				are using the car	
  				\item The system must be able to lock and unlock each car
  				\item The system must be able to know the current motor state of each car (\emph{on}
  				or \emph{off})
  				\item The system must be able to know the current percentage of battery of each car
  				\item The system must be able to unlock a car if the user paired with the
  				\emph{Reserved} state of the car is located near \todo{how much?} the car
  				\item The system can set the state of a \emph{Reserved} car to \emph{In Use} i.f.f. the
  				user paired with the \emph{Reserved} state of the car has unlocked the car and he ignites
  				the car motor
  				\item The system must lock a car if no passengers are detected on the car and the car
  				motor is \emph{off}
  				\item Locking a \emph{In Use} car the system must set its state from \emph{In Use} to
  				\emph{Not Available} if battery percentage is lower than 20\%, to \emph{Available}
  				otherwise
  				\item Locking a \emph{In Use} car the system must charge (through a payment
  				procedure) the user paired with the \emph{In Use} state for the correct amount of money
  				proportional to time the car has been used by the aforementioned user
  				\item When a user is paired with a car set as \emph{In Use} in every moment the system
  				must show him of the current charge through the car display \todo{assumption macchine
  				hanno tutte un display}
  				\item The system must be able to identify if a given position is or not inside a sets of safe
  				areas
  				\item When a user is paired with a car set as \emph{In Use} in every moment the system
  				must show him if the aforementioned car position is or not inside a safe area
  				\item The system must be able to know the position of all charging stations
  				\item The system must be able to know if a car is plugged on a specific charging station
  				\item The system must be able to uniquely identify a charging station
  				\item The system must be able to know how many passengers are on the machine	
   			\end{enumerate}
  		\item \ref{goal:calculateCost}\ Calculate and charge the user for the amount of money he has
  		to pay for his last ride, also considering the various discounts and/or fees applicable based on
  		the ride
  			\begin{enumerate}[resume*]
  				\item Locking a \emph{In Use} car the system must charge the user paired with the
  				\emph{In Use} state for an additional fee if the car position is not inside a safe area; that
  				fee is composed by a fixed amount plus a variable amount proportional to the distance of
  				the car form the near safe area
  				\item If a car is located outside the set of safe areas and its state is not \emph{InUse} the
  				system must set the car state as \emph{NotAvailable}
   			\end{enumerate}
   		\item \ref{goal:banPaymentFailed}\ Ban a user from the service when the payment transaction
  		for his last ride was unsuccessful and notify customer service of the missing
  		payment
  			\begin{enumerate}[resume*]
  				\item
  			\end{enumerate}
  		\item \ref{goal:moneySavingOption}\ Allow the user to enable a money saving option which
  		provides the user with a destination charging station to get a discount
  			\begin{enumerate}[resume*]
  				\item
   			\end{enumerate}
  		\item \ref{goal:contactCustomerCare}\ Allow all users to contact the customer care service
  			\begin{enumerate}[resume*]
  				\item
   			\end{enumerate}
  	\end{description}

